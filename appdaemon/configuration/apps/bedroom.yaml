motion_light_bedroom:
  module: motion_light
  class: MotionLightAutomation
  dependencies:
    - presence_app
  disabled_states:
    presence: noone,vacation
  entities:
    motion_sensor: binary_sensor.bewegung_schlafzimmer
    lux_sensor: sensor.lux_schlafzimmer
    lights:
      morning: light.kugellampe_schlafzimmer
      day: light.decke_schlafzimmer
      night: light.kugellampe_schlafzimmer
  properties:
    lux_threshold: 200
    timer_sec: 300
    day_state_time:
      morning: "05:30:00"
      day: "13:30:00"
      night: "22:00:00"
    brightness_level:
      morning: 10
      day: 70
      night: 10
    light_color:
      morning: orange
      day: orange
      night: orange

dimmer_switch_schlafzimmer:
  module: switches
  class: HueDimmerSwitch
  dependencies:
    - presence_app
  disabled_states:
    presence: vacation
  entities:
    switch: dimmschalter_schlafzimmer
  properties:
    button_config:
      short_press_on:
        action_type: service_call
        action: turn_on
        entity: light.schlafzimmer
        parameters:
          brightness: 255
          color_name: white
      long_press_on:
        action_type: toggle
        action: 'on'
        entity: switch.schalter_entfeuchter
      short_press_up:
        action_type: brighten
        entity: light.schlafzimmer
      short_press_down:
        action_type: dim
        entity: light.schlafzimmer
      short_press_off:
        action_type: toggle
        action: 'off'
        entity: light.schlafzimmer
      long_press_off:
        action_type: toggle
        action: 'off'
        entity: switch.schalter_entfeuchter

sleep_app:
  module: sleep
  class: SleepAutomation
  dependencies:
    - media_player_app
    - presence_app
  disabled_states:
    presence: noone,vacation
  entities:
    dimmer_switch: dimmschalter_schlafzimmer_master
    media_player: media_player.spotify
    wakeup_light: light.kugellampe_schlafzimmer
    turn_off_entities: group.all_lights,remote.wohnzimmer,switch.schalter_entfeuchter
  properties:
    delay: 1200
    shutdown_time: "03:00:00"
    sleep_time_start: "19:00:00"
    wakeup_time_start: "05:00:00"
    sleep_playlist: spotify:user:spotify:playlist:37i9dQZF1DWSUFOo47GEsI
    wakeup_playlist: spotify:user:spotify:playlist:37i9dQZF1DWSUFOo47GEsI
    transition: 900
    source: "HEOS 5"

turn_on_sleep_mode_forgot:
  module: switches
  class: ToggleAtTime
  dependencies:
    - presence_app
  disabled_states:
    presence: vacation
  entities:
    switch: input_boolean.sleep_mode
  properties:
    action_type: toggle
    schedule_time: "13:30:00"
    state: "on"

turn_off_sleep_mode_forgot:
  module: switches
  class: ToggleAtTime
  dependencies:
    - presence_app
  disabled_states:
    presence: vacation
  entities:
    switch: input_boolean.sleep_mode
  properties:
    action_type: toggle
    schedule_time: "13:30:00"
    state: "off"

turn_on_dehumidifier_on_departure:
  module: switches
  class: ToggleOnDeparture
  dependencies:
    - presence_app
  disabled_states:
    modes:
      sleep_mode: 'on'
  entities:
    switch: switch.schalter_entfeuchter
  properties:
    action_type: toggle
    state: "on"
